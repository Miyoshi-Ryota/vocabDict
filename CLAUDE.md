# CLAUDE.md - VocabDict開発で守るべきこと

## 必ず守るべき原則

### 1. テスト駆動開発（TDD）
- **新たに実装するときは必ずテストを先に書く**
- テストが失敗することを確認してから実装
- 実装後に全テストケースが成功することを確認

### 2. デトロイト派TDDアプローチ
- **モックを避け、実際の実装を使用**
- ブラウザAPIのみモック化を許可
- 実装の詳細ではなく振る舞いを、つまりユーザーの操作とソフトウェアの応答に焦点を当てること

### 3. その他テストについて
- `waitFor`ヘルパーで非同期処理を扱い、固定タイムアウトを避ける

### 4. コミット単位
- **小さくアトミックなコミット**
- 意味のある単位で分割
- フィーチャーブランチを使用

## 技術的制約

### Safari Extension の制限
- **ES6モジュール非対応** - webpackバンドル必須
- `browser.*` API使用（`chrome.*`ではない）
- manifest v3形式
- テーマ自動検出不可（手動選択のみ）

## プロジェクト構造

詳細は以下のドキュメントを参照：
- アーキテクチャ: `docs/architecture.md`
- テスト戦略: `docs/testing.md`
- 開発ガイド: `docs/development.md`

## 重要なフィードバック履歴
- 「不必要なモックを避けなければならない。デトロイト派のテストを好む」
- 「SpacedRepetitionはサービスであるべき。データではないから」
- 「モックより実際の実装を使用することを好む」

## リンクとコマンド

### よく使うコマンド
```bash
npm test              # テスト実行
npm run lint
npm run build:dev     # 開発ビルド
npm run build:macos   # macOSアプリビルド
```

### リポジトリ
- GitHub: https://github.com/Miyoshi-Ryota/vocabDict
