/******/ (() => { // webpackBootstrap
/*!********************************!*\
  !*** ./src/content/content.js ***!
  \********************************/
// Content script for VocabDict Safari Extension

console.log('VocabDict content script loaded');

// iOS text selection handler
let lookupButton = null;
let selectionTimeout = null;

// Track if event listener is already added to prevent duplicates
if (!window.__vocabDictListenerAdded) {
  window.__vocabDictListenerAdded = true;

  // Debounced selection handler
  document.addEventListener('selectionchange', () => {
    clearTimeout(selectionTimeout);
    selectionTimeout = setTimeout(() => {
      handleSelection();
    }, 300);
  });
}
function handleSelection() {
  const selection = window.getSelection();
  const selectedText = selection.toString().trim();

  // Clean up existing button
  if (lookupButton) {
    lookupButton.remove();
    lookupButton = null;
  }

  // Validate selection
  if (selectedText && selectedText.length <= 50 && selectedText.split(/\s+/).length <= 3) {
    try {
      const range = selection.getRangeAt(0);
      const rect = range.getBoundingClientRect();

      // Only show button if selection is visible
      if (rect.width > 0 && rect.height > 0) {
        createLookupButton(selectedText, rect);
      }
    } catch (e) {
      console.error('VocabDict: Error handling selection', e);
    }
  }
}
function createLookupButton(selectedText, rect) {
  // Create lookup button
  const button = document.createElement('button');
  button.className = 'vocabdict-lookup-button';
  button.textContent = 'ðŸ”';
  button.setAttribute('aria-label', `Look up "${selectedText}"`);

  // Position button near selection
  const buttonSize = 44; // minimum touch target size
  const padding = 8;

  // Calculate position - try to place below selection, but adjust if near screen edge
  let top = rect.bottom + padding;
  let left = rect.left + rect.width / 2 - buttonSize / 2;

  // Adjust if button would be off-screen
  if (top + buttonSize > window.innerHeight - padding) {
    top = rect.top - buttonSize - padding; // Place above instead
  }
  if (left < padding) {
    left = padding;
  }
  if (left + buttonSize > window.innerWidth - padding) {
    left = window.innerWidth - buttonSize - padding;
  }

  // Account for scroll position
  top += window.scrollY;
  left += window.scrollX;
  button.style.top = `${top}px`;
  button.style.left = `${left}px`;

  // Add click handler
  button.addEventListener('click', async e => {
    e.preventDefault();
    e.stopPropagation();

    // Remove button
    button.remove();
    lookupButton = null;

    // Get user's text selection mode preference
    try {
      const settingsResponse = await browser.runtime.sendMessage({
        type: 'get_settings'
      });
      const textSelectionMode = settingsResponse.success && settingsResponse.data ? settingsResponse.data.textSelectionMode || 'inline' : 'inline';
      if (textSelectionMode === 'popup') {
        // Open popup with the selected word
        await browser.runtime.sendMessage({
          type: 'open_popup_with_word',
          word: selectedText
        });
      } else {
        // Default inline behavior - show overlay
        await showWordLookupOverlay(selectedText, rect);
      }
    } catch (error) {
      console.error('VocabDict: Error getting settings, falling back to inline mode', error);
      // Fallback to inline mode if settings can't be retrieved
      await showWordLookupOverlay(selectedText, rect);
    }
  });

  // Add button to page
  document.body.appendChild(button);
  lookupButton = button;
}
async function showWordLookupOverlay(word, rect) {
  // Create overlay container
  const overlay = document.createElement('div');
  overlay.className = 'vocabdict-overlay loading';

  // Position overlay
  let top = rect.top - 200; // Try to place above selection
  let left = rect.left + rect.width / 2 - 140; // Center horizontally

  // Adjust if overlay would be off-screen
  if (top < 20) {
    top = rect.bottom + 20; // Place below instead
  }
  if (left < 20) {
    left = 20;
  }
  if (left + 280 > window.innerWidth - 20) {
    left = window.innerWidth - 300;
  }

  // Account for scroll position
  top += window.scrollY;
  left += window.scrollX;
  overlay.style.top = `${top}px`;
  overlay.style.left = `${left}px`;

  // Show loading state
  overlay.innerHTML = `
    <div class="vocabdict-overlay-content">
      <div class="loading-spinner"></div>
      <div class="loading-text">Looking up "${word}"...</div>
    </div>
  `;
  document.body.appendChild(overlay);
  try {
    // Look up word using background script
    const response = await browser.runtime.sendMessage({
      type: 'lookup_word',
      word
    });
    if (response.success) {
      if (response.data) {
        // Show word definition
        displayWordDefinition(overlay, response.data);
      } else if (response.suggestions && response.suggestions.length > 0) {
        // Show suggestions for misspelled word
        displaySuggestions(overlay, word, response.suggestions);
      } else {
        // No results found
        displayError(overlay, `No definition found for "${word}"`);
      }
    } else {
      displayError(overlay, response.error || 'Failed to look up word');
    }
  } catch (error) {
    console.error('VocabDict: Error looking up word', error);
    displayError(overlay, 'Failed to look up word');
  }

  // Set up overlay event handlers
  setupOverlayEventHandlers(overlay);
}
function displayWordDefinition(overlay, wordData) {
  overlay.className = 'vocabdict-overlay';
  const definitions = Array.isArray(wordData.definitions) ? wordData.definitions : [{
    partOfSpeech: '',
    meaning: wordData.definition
  }];
  const definitionsHTML = definitions.map(def => `
    <div class="definition-item">
      ${def.partOfSpeech ? `<div class="part-of-speech">${def.partOfSpeech}</div>` : ''}
      <div class="definition-text">${def.meaning || def.definition}</div>
    </div>
  `).join('');
  overlay.innerHTML = `
    <div class="vocabdict-overlay-content">
      <div class="word-title">${wordData.word}</div>
      ${wordData.pronunciation ? `<div class="word-pronunciation">${wordData.pronunciation}</div>` : ''}
      <div class="word-definitions">
        ${definitionsHTML}
      </div>
    </div>
    <div class="overlay-actions">
      <button class="add-to-list-button">Add to List</button>
      <button class="close-button">Ã—</button>
    </div>
  `;

  // Set up add to list functionality
  const addButton = overlay.querySelector('.add-to-list-button');
  addButton.addEventListener('click', async () => {
    await addWordToList(wordData.word);
  });
}
function displaySuggestions(overlay, originalWord, suggestions) {
  overlay.className = 'vocabdict-overlay';
  const suggestionsHTML = suggestions.map(suggestion => `
    <span class="suggestion-item" data-word="${suggestion}">${suggestion}</span>
  `).join('');
  overlay.innerHTML = `
    <div class="vocabdict-overlay-content">
      <div class="error-message">No definition found for "${originalWord}"</div>
      <div class="suggestions">
        <div class="suggestions-title">Did you mean?</div>
        ${suggestionsHTML}
      </div>
    </div>
    <div class="overlay-actions">
      <button class="close-button">Close</button>
    </div>
  `;

  // Handle suggestion clicks
  overlay.querySelectorAll('.suggestion-item').forEach(item => {
    item.addEventListener('click', async () => {
      const suggestedWord = item.getAttribute('data-word');
      overlay.remove();

      // Look up the suggested word
      const selection = window.getSelection();
      const range = selection.getRangeAt(0);
      const rect = range.getBoundingClientRect();
      await showWordLookupOverlay(suggestedWord, rect);
    });
  });
}
function displayError(overlay, errorMessage) {
  overlay.className = 'vocabdict-overlay';
  overlay.innerHTML = `
    <div class="vocabdict-overlay-content">
      <div class="error-message">${errorMessage}</div>
    </div>
    <div class="overlay-actions">
      <button class="close-button">Close</button>
    </div>
  `;
}
async function addWordToList(word) {
  try {
    // Get available lists
    const listsResponse = await browser.runtime.sendMessage({
      type: 'get_lists'
    });
    if (listsResponse.success && listsResponse.data.length > 0) {
      // Use the first available list (default list)
      const listId = listsResponse.data[0].id;
      const addResponse = await browser.runtime.sendMessage({
        type: 'add_to_list',
        word,
        listId,
        metadata: {
          difficulty: 'medium',
          context: 'Added from webpage'
        }
      });
      if (addResponse.success) {
        // Show success feedback
        showNotification(`Added "${word}" to vocabulary list`);
      } else {
        showNotification(`Failed to add "${word}": ${addResponse.error}`);
      }
    } else {
      showNotification('No vocabulary lists available');
    }
  } catch (error) {
    console.error('VocabDict: Error adding word to list', error);
    showNotification('Failed to add word to list');
  }
}
function showNotification(message) {
  // Simple notification - could be enhanced
  const notification = document.createElement('div');
  notification.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    background: #34C759;
    color: white;
    padding: 12px 16px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 500;
    z-index: 2147483647;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  `;
  notification.textContent = message;
  document.body.appendChild(notification);
  setTimeout(() => {
    notification.remove();
  }, 3000);
}
function setupOverlayEventHandlers(overlay) {
  // Close button handler
  const closeButton = overlay.querySelector('.close-button');
  if (closeButton) {
    closeButton.addEventListener('click', () => {
      closeOverlay(overlay);
    });
  }

  // Click outside to close
  const handleClickOutside = e => {
    if (!overlay.contains(e.target)) {
      closeOverlay(overlay);
      document.removeEventListener('click', handleClickOutside);
    }
  };

  // Add listener immediately since button click already has stopPropagation()
  document.addEventListener('click', handleClickOutside);

  // Escape key to close
  const handleEscape = e => {
    if (e.key === 'Escape') {
      closeOverlay(overlay);
      document.removeEventListener('keydown', handleEscape);
    }
  };
  document.addEventListener('keydown', handleEscape);
}
function closeOverlay(overlay) {
  overlay.classList.add('closing');
  setTimeout(() => {
    overlay.remove();

    // Clear text selection
    const selection = window.getSelection();
    selection.removeAllRanges();
  }, 150); // Match CSS animation duration
}

// Clean up on page unload
window.addEventListener('pagehide', () => {
  if (lookupButton) {
    lookupButton.remove();
  }
});
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFnQixDQUFDLE9BQU8sRUFBRStGLGtCQUFrQixDQUFDOztFQUV0RDtFQUNBLE1BQU1JLFlBQVksR0FBSWhGLENBQUMsSUFBSztJQUMxQixJQUFJQSxDQUFDLENBQUNpRixHQUFHLEtBQUssUUFBUSxFQUFFO01BQ3RCTixZQUFZLENBQUM1QyxPQUFPLENBQUM7TUFDckJuRCxRQUFRLENBQUNtRyxtQkFBbUIsQ0FBQyxTQUFTLEVBQUVDLFlBQVksQ0FBQztJQUN2RDtFQUNGLENBQUM7RUFFRHBHLFFBQVEsQ0FBQ0MsZ0JBQWdCLENBQUMsU0FBUyxFQUFFbUcsWUFBWSxDQUFDO0FBQ3BEO0FBRUEsU0FBU0wsWUFBWUEsQ0FBQzVDLE9BQU8sRUFBRTtFQUM3QkEsT0FBTyxDQUFDbUQsU0FBUyxDQUFDQyxHQUFHLENBQUMsU0FBUyxDQUFDO0VBRWhDcEcsVUFBVSxDQUFDLE1BQU07SUFDZmdELE9BQU8sQ0FBQ3pDLE1BQU0sQ0FBQyxDQUFDOztJQUVoQjtJQUNBLE1BQU1MLFNBQVMsR0FBR1AsTUFBTSxDQUFDUSxZQUFZLENBQUMsQ0FBQztJQUN2Q0QsU0FBUyxDQUFDbUcsZUFBZSxDQUFDLENBQUM7RUFDN0IsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDWDs7QUFFQTtBQUNBMUcsTUFBTSxDQUFDRyxnQkFBZ0IsQ0FBQyxVQUFVLEVBQUUsTUFBTTtFQUN4QyxJQUFJTCxZQUFZLEVBQUU7SUFDaEJBLFlBQVksQ0FBQ2MsTUFBTSxDQUFDLENBQUM7RUFDdkI7QUFDRixDQUFDLENBQUMsQyIsInNvdXJjZXMiOlsid2VicGFjazovL3ZvY2FiZGljdC8uL3NyYy9jb250ZW50L2NvbnRlbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29udGVudCBzY3JpcHQgZm9yIFZvY2FiRGljdCBTYWZhcmkgRXh0ZW5zaW9uXG5cbmNvbnNvbGUubG9nKCdWb2NhYkRpY3QgY29udGVudCBzY3JpcHQgbG9hZGVkJyk7XG5cbi8vIGlPUyB0ZXh0IHNlbGVjdGlvbiBoYW5kbGVyXG5sZXQgbG9va3VwQnV0dG9uID0gbnVsbDtcbmxldCBzZWxlY3Rpb25UaW1lb3V0ID0gbnVsbDtcblxuLy8gVHJhY2sgaWYgZXZlbnQgbGlzdGVuZXIgaXMgYWxyZWFkeSBhZGRlZCB0byBwcmV2ZW50IGR1cGxpY2F0ZXNcbmlmICghd2luZG93Ll9fdm9jYWJEaWN0TGlzdGVuZXJBZGRlZCkge1xuICB3aW5kb3cuX192b2NhYkRpY3RMaXN0ZW5lckFkZGVkID0gdHJ1ZTtcblxuICAvLyBEZWJvdW5jZWQgc2VsZWN0aW9uIGhhbmRsZXJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2VsZWN0aW9uY2hhbmdlJywgKCkgPT4ge1xuICAgIGNsZWFyVGltZW91dChzZWxlY3Rpb25UaW1lb3V0KTtcblxuICAgIHNlbGVjdGlvblRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGhhbmRsZVNlbGVjdGlvbigpO1xuICAgIH0sIDMwMCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVTZWxlY3Rpb24oKSB7XG4gIGNvbnN0IHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgY29uc3Qgc2VsZWN0ZWRUZXh0ID0gc2VsZWN0aW9uLnRvU3RyaW5nKCkudHJpbSgpO1xuXG4gIC8vIENsZWFuIHVwIGV4aXN0aW5nIGJ1dHRvblxuICBpZiAobG9va3VwQnV0dG9uKSB7XG4gICAgbG9va3VwQnV0dG9uLnJlbW92ZSgpO1xuICAgIGxvb2t1cEJ1dHRvbiA9IG51bGw7XG4gIH1cblxuICAvLyBWYWxpZGF0ZSBzZWxlY3Rpb25cbiAgaWYgKHNlbGVjdGVkVGV4dCAmJlxuICAgICAgc2VsZWN0ZWRUZXh0Lmxlbmd0aCA8PSA1MCAmJlxuICAgICAgc2VsZWN0ZWRUZXh0LnNwbGl0KC9cXHMrLykubGVuZ3RoIDw9IDMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmFuZ2UgPSBzZWxlY3Rpb24uZ2V0UmFuZ2VBdCgwKTtcbiAgICAgIGNvbnN0IHJlY3QgPSByYW5nZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgLy8gT25seSBzaG93IGJ1dHRvbiBpZiBzZWxlY3Rpb24gaXMgdmlzaWJsZVxuICAgICAgaWYgKHJlY3Qud2lkdGggPiAwICYmIHJlY3QuaGVpZ2h0ID4gMCkge1xuICAgICAgICBjcmVhdGVMb29rdXBCdXR0b24oc2VsZWN0ZWRUZXh0LCByZWN0KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdWb2NhYkRpY3Q6IEVycm9yIGhhbmRsaW5nIHNlbGVjdGlvbicsIGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVMb29rdXBCdXR0b24oc2VsZWN0ZWRUZXh0LCByZWN0KSB7XG4gIC8vIENyZWF0ZSBsb29rdXAgYnV0dG9uXG4gIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICBidXR0b24uY2xhc3NOYW1lID0gJ3ZvY2FiZGljdC1sb29rdXAtYnV0dG9uJztcbiAgYnV0dG9uLnRleHRDb250ZW50ID0gJ/CflI0nO1xuICBidXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgYExvb2sgdXAgXCIke3NlbGVjdGVkVGV4dH1cImApO1xuXG4gIC8vIFBvc2l0aW9uIGJ1dHRvbiBuZWFyIHNlbGVjdGlvblxuICBjb25zdCBidXR0b25TaXplID0gNDQ7IC8vIG1pbmltdW0gdG91Y2ggdGFyZ2V0IHNpemVcbiAgY29uc3QgcGFkZGluZyA9IDg7XG5cbiAgLy8gQ2FsY3VsYXRlIHBvc2l0aW9uIC0gdHJ5IHRvIHBsYWNlIGJlbG93IHNlbGVjdGlvbiwgYnV0IGFkanVzdCBpZiBuZWFyIHNjcmVlbiBlZGdlXG4gIGxldCB0b3AgPSByZWN0LmJvdHRvbSArIHBhZGRpbmc7XG4gIGxldCBsZWZ0ID0gcmVjdC5sZWZ0ICsgKHJlY3Qud2lkdGggLyAyKSAtIChidXR0b25TaXplIC8gMik7XG5cbiAgLy8gQWRqdXN0IGlmIGJ1dHRvbiB3b3VsZCBiZSBvZmYtc2NyZWVuXG4gIGlmICh0b3AgKyBidXR0b25TaXplID4gd2luZG93LmlubmVySGVpZ2h0IC0gcGFkZGluZykge1xuICAgIHRvcCA9IHJlY3QudG9wIC0gYnV0dG9uU2l6ZSAtIHBhZGRpbmc7IC8vIFBsYWNlIGFib3ZlIGluc3RlYWRcbiAgfVxuICBpZiAobGVmdCA8IHBhZGRpbmcpIHtcbiAgICBsZWZ0ID0gcGFkZGluZztcbiAgfVxuICBpZiAobGVmdCArIGJ1dHRvblNpemUgPiB3aW5kb3cuaW5uZXJXaWR0aCAtIHBhZGRpbmcpIHtcbiAgICBsZWZ0ID0gd2luZG93LmlubmVyV2lkdGggLSBidXR0b25TaXplIC0gcGFkZGluZztcbiAgfVxuXG4gIC8vIEFjY291bnQgZm9yIHNjcm9sbCBwb3NpdGlvblxuICB0b3AgKz0gd2luZG93LnNjcm9sbFk7XG4gIGxlZnQgKz0gd2luZG93LnNjcm9sbFg7XG5cbiAgYnV0dG9uLnN0eWxlLnRvcCA9IGAke3RvcH1weGA7XG4gIGJ1dHRvbi5zdHlsZS5sZWZ0ID0gYCR7bGVmdH1weGA7XG5cbiAgLy8gQWRkIGNsaWNrIGhhbmRsZXJcbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgIC8vIFJlbW92ZSBidXR0b25cbiAgICBidXR0b24ucmVtb3ZlKCk7XG4gICAgbG9va3VwQnV0dG9uID0gbnVsbDtcblxuICAgIC8vIEdldCB1c2VyJ3MgdGV4dCBzZWxlY3Rpb24gbW9kZSBwcmVmZXJlbmNlXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNldHRpbmdzUmVzcG9uc2UgPSBhd2FpdCBicm93c2VyLnJ1bnRpbWUuc2VuZE1lc3NhZ2Uoe1xuICAgICAgICB0eXBlOiAnZ2V0X3NldHRpbmdzJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHRleHRTZWxlY3Rpb25Nb2RlID0gc2V0dGluZ3NSZXNwb25zZS5zdWNjZXNzICYmIHNldHRpbmdzUmVzcG9uc2UuZGF0YVxuICAgICAgICA/IHNldHRpbmdzUmVzcG9uc2UuZGF0YS50ZXh0U2VsZWN0aW9uTW9kZSB8fCAnaW5saW5lJ1xuICAgICAgICA6ICdpbmxpbmUnO1xuXG4gICAgICBpZiAodGV4dFNlbGVjdGlvbk1vZGUgPT09ICdwb3B1cCcpIHtcbiAgICAgICAgLy8gT3BlbiBwb3B1cCB3aXRoIHRoZSBzZWxlY3RlZCB3b3JkXG4gICAgICAgIGF3YWl0IGJyb3dzZXIucnVudGltZS5zZW5kTWVzc2FnZSh7XG4gICAgICAgICAgdHlwZTogJ29wZW5fcG9wdXBfd2l0aF93b3JkJyxcbiAgICAgICAgICB3b3JkOiBzZWxlY3RlZFRleHRcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBEZWZhdWx0IGlubGluZSBiZWhhdmlvciAtIHNob3cgb3ZlcmxheVxuICAgICAgICBhd2FpdCBzaG93V29yZExvb2t1cE92ZXJsYXkoc2VsZWN0ZWRUZXh0LCByZWN0KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignVm9jYWJEaWN0OiBFcnJvciBnZXR0aW5nIHNldHRpbmdzLCBmYWxsaW5nIGJhY2sgdG8gaW5saW5lIG1vZGUnLCBlcnJvcik7XG4gICAgICAvLyBGYWxsYmFjayB0byBpbmxpbmUgbW9kZSBpZiBzZXR0aW5ncyBjYW4ndCBiZSByZXRyaWV2ZWRcbiAgICAgIGF3YWl0IHNob3dXb3JkTG9va3VwT3ZlcmxheShzZWxlY3RlZFRleHQsIHJlY3QpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gQWRkIGJ1dHRvbiB0byBwYWdlXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgbG9va3VwQnV0dG9uID0gYnV0dG9uO1xufVxuXG5hc3luYyBmdW5jdGlvbiBzaG93V29yZExvb2t1cE92ZXJsYXkod29yZCwgcmVjdCkge1xuICAvLyBDcmVhdGUgb3ZlcmxheSBjb250YWluZXJcbiAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBvdmVybGF5LmNsYXNzTmFtZSA9ICd2b2NhYmRpY3Qtb3ZlcmxheSBsb2FkaW5nJztcblxuICAvLyBQb3NpdGlvbiBvdmVybGF5XG4gIGxldCB0b3AgPSByZWN0LnRvcCAtIDIwMDsgLy8gVHJ5IHRvIHBsYWNlIGFib3ZlIHNlbGVjdGlvblxuICBsZXQgbGVmdCA9IHJlY3QubGVmdCArIChyZWN0LndpZHRoIC8gMikgLSAxNDA7IC8vIENlbnRlciBob3Jpem9udGFsbHlcblxuICAvLyBBZGp1c3QgaWYgb3ZlcmxheSB3b3VsZCBiZSBvZmYtc2NyZWVuXG4gIGlmICh0b3AgPCAyMCkge1xuICAgIHRvcCA9IHJlY3QuYm90dG9tICsgMjA7IC8vIFBsYWNlIGJlbG93IGluc3RlYWRcbiAgfVxuICBpZiAobGVmdCA8IDIwKSB7XG4gICAgbGVmdCA9IDIwO1xuICB9XG4gIGlmIChsZWZ0ICsgMjgwID4gd2luZG93LmlubmVyV2lkdGggLSAyMCkge1xuICAgIGxlZnQgPSB3aW5kb3cuaW5uZXJXaWR0aCAtIDMwMDtcbiAgfVxuXG4gIC8vIEFjY291bnQgZm9yIHNjcm9sbCBwb3NpdGlvblxuICB0b3AgKz0gd2luZG93LnNjcm9sbFk7XG4gIGxlZnQgKz0gd2luZG93LnNjcm9sbFg7XG5cbiAgb3ZlcmxheS5zdHlsZS50b3AgPSBgJHt0b3B9cHhgO1xuICBvdmVybGF5LnN0eWxlLmxlZnQgPSBgJHtsZWZ0fXB4YDtcblxuICAvLyBTaG93IGxvYWRpbmcgc3RhdGVcbiAgb3ZlcmxheS5pbm5lckhUTUwgPSBgXG4gICAgPGRpdiBjbGFzcz1cInZvY2FiZGljdC1vdmVybGF5LWNvbnRlbnRcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJsb2FkaW5nLXNwaW5uZXJcIj48L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJsb2FkaW5nLXRleHRcIj5Mb29raW5nIHVwIFwiJHt3b3JkfVwiLi4uPC9kaXY+XG4gICAgPC9kaXY+XG4gIGA7XG5cbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdmVybGF5KTtcblxuICB0cnkge1xuICAgIC8vIExvb2sgdXAgd29yZCB1c2luZyBiYWNrZ3JvdW5kIHNjcmlwdFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYnJvd3Nlci5ydW50aW1lLnNlbmRNZXNzYWdlKHtcbiAgICAgIHR5cGU6ICdsb29rdXBfd29yZCcsXG4gICAgICB3b3JkXG4gICAgfSk7XG5cbiAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgLy8gU2hvdyB3b3JkIGRlZmluaXRpb25cbiAgICAgICAgZGlzcGxheVdvcmREZWZpbml0aW9uKG92ZXJsYXksIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5zdWdnZXN0aW9ucyAmJiByZXNwb25zZS5zdWdnZXN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIFNob3cgc3VnZ2VzdGlvbnMgZm9yIG1pc3NwZWxsZWQgd29yZFxuICAgICAgICBkaXNwbGF5U3VnZ2VzdGlvbnMob3ZlcmxheSwgd29yZCwgcmVzcG9uc2Uuc3VnZ2VzdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTm8gcmVzdWx0cyBmb3VuZFxuICAgICAgICBkaXNwbGF5RXJyb3Iob3ZlcmxheSwgYE5vIGRlZmluaXRpb24gZm91bmQgZm9yIFwiJHt3b3JkfVwiYCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGRpc3BsYXlFcnJvcihvdmVybGF5LCByZXNwb25zZS5lcnJvciB8fCAnRmFpbGVkIHRvIGxvb2sgdXAgd29yZCcpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdWb2NhYkRpY3Q6IEVycm9yIGxvb2tpbmcgdXAgd29yZCcsIGVycm9yKTtcbiAgICBkaXNwbGF5RXJyb3Iob3ZlcmxheSwgJ0ZhaWxlZCB0byBsb29rIHVwIHdvcmQnKTtcbiAgfVxuXG4gIC8vIFNldCB1cCBvdmVybGF5IGV2ZW50IGhhbmRsZXJzXG4gIHNldHVwT3ZlcmxheUV2ZW50SGFuZGxlcnMob3ZlcmxheSk7XG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlXb3JkRGVmaW5pdGlvbihvdmVybGF5LCB3b3JkRGF0YSkge1xuICBvdmVybGF5LmNsYXNzTmFtZSA9ICd2b2NhYmRpY3Qtb3ZlcmxheSc7XG5cbiAgY29uc3QgZGVmaW5pdGlvbnMgPSBBcnJheS5pc0FycmF5KHdvcmREYXRhLmRlZmluaXRpb25zKVxuICAgID8gd29yZERhdGEuZGVmaW5pdGlvbnNcbiAgICA6IFt7IHBhcnRPZlNwZWVjaDogJycsIG1lYW5pbmc6IHdvcmREYXRhLmRlZmluaXRpb24gfV07XG5cbiAgY29uc3QgZGVmaW5pdGlvbnNIVE1MID0gZGVmaW5pdGlvbnMubWFwKGRlZiA9PiBgXG4gICAgPGRpdiBjbGFzcz1cImRlZmluaXRpb24taXRlbVwiPlxuICAgICAgJHtkZWYucGFydE9mU3BlZWNoID8gYDxkaXYgY2xhc3M9XCJwYXJ0LW9mLXNwZWVjaFwiPiR7ZGVmLnBhcnRPZlNwZWVjaH08L2Rpdj5gIDogJyd9XG4gICAgICA8ZGl2IGNsYXNzPVwiZGVmaW5pdGlvbi10ZXh0XCI+JHtkZWYubWVhbmluZyB8fCBkZWYuZGVmaW5pdGlvbn08L2Rpdj5cbiAgICA8L2Rpdj5cbiAgYCkuam9pbignJyk7XG5cbiAgb3ZlcmxheS5pbm5lckhUTUwgPSBgXG4gICAgPGRpdiBjbGFzcz1cInZvY2FiZGljdC1vdmVybGF5LWNvbnRlbnRcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJ3b3JkLXRpdGxlXCI+JHt3b3JkRGF0YS53b3JkfTwvZGl2PlxuICAgICAgJHt3b3JkRGF0YS5wcm9udW5jaWF0aW9uID8gYDxkaXYgY2xhc3M9XCJ3b3JkLXByb251bmNpYXRpb25cIj4ke3dvcmREYXRhLnByb251bmNpYXRpb259PC9kaXY+YCA6ICcnfVxuICAgICAgPGRpdiBjbGFzcz1cIndvcmQtZGVmaW5pdGlvbnNcIj5cbiAgICAgICAgJHtkZWZpbml0aW9uc0hUTUx9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwib3ZlcmxheS1hY3Rpb25zXCI+XG4gICAgICA8YnV0dG9uIGNsYXNzPVwiYWRkLXRvLWxpc3QtYnV0dG9uXCI+QWRkIHRvIExpc3Q8L2J1dHRvbj5cbiAgICAgIDxidXR0b24gY2xhc3M9XCJjbG9zZS1idXR0b25cIj7DlzwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICBgO1xuXG4gIC8vIFNldCB1cCBhZGQgdG8gbGlzdCBmdW5jdGlvbmFsaXR5XG4gIGNvbnN0IGFkZEJ1dHRvbiA9IG92ZXJsYXkucXVlcnlTZWxlY3RvcignLmFkZC10by1saXN0LWJ1dHRvbicpO1xuICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgYWRkV29yZFRvTGlzdCh3b3JkRGF0YS53b3JkKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlTdWdnZXN0aW9ucyhvdmVybGF5LCBvcmlnaW5hbFdvcmQsIHN1Z2dlc3Rpb25zKSB7XG4gIG92ZXJsYXkuY2xhc3NOYW1lID0gJ3ZvY2FiZGljdC1vdmVybGF5JztcblxuICBjb25zdCBzdWdnZXN0aW9uc0hUTUwgPSBzdWdnZXN0aW9ucy5tYXAoc3VnZ2VzdGlvbiA9PiBgXG4gICAgPHNwYW4gY2xhc3M9XCJzdWdnZXN0aW9uLWl0ZW1cIiBkYXRhLXdvcmQ9XCIke3N1Z2dlc3Rpb259XCI+JHtzdWdnZXN0aW9ufTwvc3Bhbj5cbiAgYCkuam9pbignJyk7XG5cbiAgb3ZlcmxheS5pbm5lckhUTUwgPSBgXG4gICAgPGRpdiBjbGFzcz1cInZvY2FiZGljdC1vdmVybGF5LWNvbnRlbnRcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJlcnJvci1tZXNzYWdlXCI+Tm8gZGVmaW5pdGlvbiBmb3VuZCBmb3IgXCIke29yaWdpbmFsV29yZH1cIjwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cInN1Z2dlc3Rpb25zXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJzdWdnZXN0aW9ucy10aXRsZVwiPkRpZCB5b3UgbWVhbj88L2Rpdj5cbiAgICAgICAgJHtzdWdnZXN0aW9uc0hUTUx9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwib3ZlcmxheS1hY3Rpb25zXCI+XG4gICAgICA8YnV0dG9uIGNsYXNzPVwiY2xvc2UtYnV0dG9uXCI+Q2xvc2U8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgYDtcblxuICAvLyBIYW5kbGUgc3VnZ2VzdGlvbiBjbGlja3NcbiAgb3ZlcmxheS5xdWVyeVNlbGVjdG9yQWxsKCcuc3VnZ2VzdGlvbi1pdGVtJykuZm9yRWFjaChpdGVtID0+IHtcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3VnZ2VzdGVkV29yZCA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXdvcmQnKTtcbiAgICAgIG92ZXJsYXkucmVtb3ZlKCk7XG5cbiAgICAgIC8vIExvb2sgdXAgdGhlIHN1Z2dlc3RlZCB3b3JkXG4gICAgICBjb25zdCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICBjb25zdCByYW5nZSA9IHNlbGVjdGlvbi5nZXRSYW5nZUF0KDApO1xuICAgICAgY29uc3QgcmVjdCA9IHJhbmdlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgYXdhaXQgc2hvd1dvcmRMb29rdXBPdmVybGF5KHN1Z2dlc3RlZFdvcmQsIHJlY3QpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZGlzcGxheUVycm9yKG92ZXJsYXksIGVycm9yTWVzc2FnZSkge1xuICBvdmVybGF5LmNsYXNzTmFtZSA9ICd2b2NhYmRpY3Qtb3ZlcmxheSc7XG4gIG92ZXJsYXkuaW5uZXJIVE1MID0gYFxuICAgIDxkaXYgY2xhc3M9XCJ2b2NhYmRpY3Qtb3ZlcmxheS1jb250ZW50XCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiZXJyb3ItbWVzc2FnZVwiPiR7ZXJyb3JNZXNzYWdlfTwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJvdmVybGF5LWFjdGlvbnNcIj5cbiAgICAgIDxidXR0b24gY2xhc3M9XCJjbG9zZS1idXR0b25cIj5DbG9zZTwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICBgO1xufVxuXG5hc3luYyBmdW5jdGlvbiBhZGRXb3JkVG9MaXN0KHdvcmQpIHtcbiAgdHJ5IHtcbiAgICAvLyBHZXQgYXZhaWxhYmxlIGxpc3RzXG4gICAgY29uc3QgbGlzdHNSZXNwb25zZSA9IGF3YWl0IGJyb3dzZXIucnVudGltZS5zZW5kTWVzc2FnZSh7XG4gICAgICB0eXBlOiAnZ2V0X2xpc3RzJ1xuICAgIH0pO1xuXG4gICAgaWYgKGxpc3RzUmVzcG9uc2Uuc3VjY2VzcyAmJiBsaXN0c1Jlc3BvbnNlLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgLy8gVXNlIHRoZSBmaXJzdCBhdmFpbGFibGUgbGlzdCAoZGVmYXVsdCBsaXN0KVxuICAgICAgY29uc3QgbGlzdElkID0gbGlzdHNSZXNwb25zZS5kYXRhWzBdLmlkO1xuXG4gICAgICBjb25zdCBhZGRSZXNwb25zZSA9IGF3YWl0IGJyb3dzZXIucnVudGltZS5zZW5kTWVzc2FnZSh7XG4gICAgICAgIHR5cGU6ICdhZGRfdG9fbGlzdCcsXG4gICAgICAgIHdvcmQsXG4gICAgICAgIGxpc3RJZCxcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICBkaWZmaWN1bHR5OiAnbWVkaXVtJyxcbiAgICAgICAgICBjb250ZXh0OiAnQWRkZWQgZnJvbSB3ZWJwYWdlJ1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKGFkZFJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgLy8gU2hvdyBzdWNjZXNzIGZlZWRiYWNrXG4gICAgICAgIHNob3dOb3RpZmljYXRpb24oYEFkZGVkIFwiJHt3b3JkfVwiIHRvIHZvY2FidWxhcnkgbGlzdGApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2hvd05vdGlmaWNhdGlvbihgRmFpbGVkIHRvIGFkZCBcIiR7d29yZH1cIjogJHthZGRSZXNwb25zZS5lcnJvcn1gKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2hvd05vdGlmaWNhdGlvbignTm8gdm9jYWJ1bGFyeSBsaXN0cyBhdmFpbGFibGUnKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignVm9jYWJEaWN0OiBFcnJvciBhZGRpbmcgd29yZCB0byBsaXN0JywgZXJyb3IpO1xuICAgIHNob3dOb3RpZmljYXRpb24oJ0ZhaWxlZCB0byBhZGQgd29yZCB0byBsaXN0Jyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2hvd05vdGlmaWNhdGlvbihtZXNzYWdlKSB7XG4gIC8vIFNpbXBsZSBub3RpZmljYXRpb24gLSBjb3VsZCBiZSBlbmhhbmNlZFxuICBjb25zdCBub3RpZmljYXRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgbm90aWZpY2F0aW9uLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgIHRvcDogMjBweDtcbiAgICByaWdodDogMjBweDtcbiAgICBiYWNrZ3JvdW5kOiAjMzRDNzU5O1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBwYWRkaW5nOiAxMnB4IDE2cHg7XG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIHotaW5kZXg6IDIxNDc0ODM2NDc7XG4gICAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gICAgZm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgXCJTZWdvZSBVSVwiLCBSb2JvdG8sIHNhbnMtc2VyaWY7XG4gIGA7XG4gIG5vdGlmaWNhdGlvbi50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG5cbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChub3RpZmljYXRpb24pO1xuXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIG5vdGlmaWNhdGlvbi5yZW1vdmUoKTtcbiAgfSwgMzAwMCk7XG59XG5cbmZ1bmN0aW9uIHNldHVwT3ZlcmxheUV2ZW50SGFuZGxlcnMob3ZlcmxheSkge1xuICAvLyBDbG9zZSBidXR0b24gaGFuZGxlclxuICBjb25zdCBjbG9zZUJ1dHRvbiA9IG92ZXJsYXkucXVlcnlTZWxlY3RvcignLmNsb3NlLWJ1dHRvbicpO1xuICBpZiAoY2xvc2VCdXR0b24pIHtcbiAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGNsb3NlT3ZlcmxheShvdmVybGF5KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIENsaWNrIG91dHNpZGUgdG8gY2xvc2VcbiAgY29uc3QgaGFuZGxlQ2xpY2tPdXRzaWRlID0gKGUpID0+IHtcbiAgICBpZiAoIW92ZXJsYXkuY29udGFpbnMoZS50YXJnZXQpKSB7XG4gICAgICBjbG9zZU92ZXJsYXkob3ZlcmxheSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUNsaWNrT3V0c2lkZSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEFkZCBsaXN0ZW5lciBpbW1lZGlhdGVseSBzaW5jZSBidXR0b24gY2xpY2sgYWxyZWFkeSBoYXMgc3RvcFByb3BhZ2F0aW9uKClcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDbGlja091dHNpZGUpO1xuXG4gIC8vIEVzY2FwZSBrZXkgdG8gY2xvc2VcbiAgY29uc3QgaGFuZGxlRXNjYXBlID0gKGUpID0+IHtcbiAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICBjbG9zZU92ZXJsYXkob3ZlcmxheSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlRXNjYXBlKTtcbiAgICB9XG4gIH07XG5cbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUVzY2FwZSk7XG59XG5cbmZ1bmN0aW9uIGNsb3NlT3ZlcmxheShvdmVybGF5KSB7XG4gIG92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnY2xvc2luZycpO1xuXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIG92ZXJsYXkucmVtb3ZlKCk7XG5cbiAgICAvLyBDbGVhciB0ZXh0IHNlbGVjdGlvblxuICAgIGNvbnN0IHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICBzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gIH0sIDE1MCk7IC8vIE1hdGNoIENTUyBhbmltYXRpb24gZHVyYXRpb25cbn1cblxuLy8gQ2xlYW4gdXAgb24gcGFnZSB1bmxvYWRcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwYWdlaGlkZScsICgpID0+IHtcbiAgaWYgKGxvb2t1cEJ1dHRvbikge1xuICAgIGxvb2t1cEJ1dHRvbi5yZW1vdmUoKTtcbiAgfVxufSk7XG4iXSwibmFtZXMiOlsiY29uc29sZSIsImxvZyIsImxvb2t1cEJ1dHRvbiIsInNlbGVjdGlvblRpbWVvdXQiLCJ3aW5kb3ciLCJfX3ZvY2FiRGljdExpc3RlbmVyQWRkZWQiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiaGFuZGxlU2VsZWN0aW9uIiwic2VsZWN0aW9uIiwiZ2V0U2VsZWN0aW9uIiwic2VsZWN0ZWRUZXh0IiwidG9TdHJpbmciLCJ0cmltIiwicmVtb3ZlIiwibGVuZ3RoIiwic3BsaXQiLCJyYW5nZSIsImdldFJhbmdlQXQiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJjcmVhdGVMb29rdXBCdXR0b24iLCJlIiwiZXJyb3IiLCJidXR0b24iLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwidGV4dENvbnRlbnQiLCJzZXRBdHRyaWJ1dGUiLCJidXR0b25TaXplIiwicGFkZGluZyIsInRvcCIsImJvdHRvbSIsImxlZnQiLCJpbm5lckhlaWdodCIsImlubmVyV2lkdGgiLCJzY3JvbGxZIiwic2Nyb2xsWCIsInN0eWxlIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJzZXR0aW5nc1Jlc3BvbnNlIiwiYnJvd3NlciIsInJ1bnRpbWUiLCJzZW5kTWVzc2FnZSIsInR5cGUiLCJ0ZXh0U2VsZWN0aW9uTW9kZSIsInN1Y2Nlc3MiLCJkYXRhIiwid29yZCIsInNob3dXb3JkTG9va3VwT3ZlcmxheSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsIm92ZXJsYXkiLCJpbm5lckhUTUwiLCJyZXNwb25zZSIsImRpc3BsYXlXb3JkRGVmaW5pdGlvbiIsInN1Z2dlc3Rpb25zIiwiZGlzcGxheVN1Z2dlc3Rpb25zIiwiZGlzcGxheUVycm9yIiwic2V0dXBPdmVybGF5RXZlbnRIYW5kbGVycyIsIndvcmREYXRhIiwiZGVmaW5pdGlvbnMiLCJBcnJheSIsImlzQXJyYXkiLCJwYXJ0T2ZTcGVlY2giLCJtZWFuaW5nIiwiZGVmaW5pdGlvbiIsImRlZmluaXRpb25zSFRNTCIsIm1hcCIsImRlZiIsImpvaW4iLCJwcm9udW5jaWF0aW9uIiwiYWRkQnV0dG9uIiwicXVlcnlTZWxlY3RvciIsImFkZFdvcmRUb0xpc3QiLCJvcmlnaW5hbFdvcmQiLCJzdWdnZXN0aW9uc0hUTUwiLCJzdWdnZXN0aW9uIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJpdGVtIiwic3VnZ2VzdGVkV29yZCIsImdldEF0dHJpYnV0ZSIsImVycm9yTWVzc2FnZSIsImxpc3RzUmVzcG9uc2UiLCJsaXN0SWQiLCJpZCIsImFkZFJlc3BvbnNlIiwibWV0YWRhdGEiLCJkaWZmaWN1bHR5IiwiY29udGV4dCIsInNob3dOb3RpZmljYXRpb24iLCJtZXNzYWdlIiwibm90aWZpY2F0aW9uIiwiY3NzVGV4dCIsImNsb3NlQnV0dG9uIiwiY2xvc2VPdmVybGF5IiwiaGFuZGxlQ2xpY2tPdXRzaWRlIiwiY29udGFpbnMiLCJ0YXJnZXQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaGFuZGxlRXNjYXBlIiwia2V5IiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlQWxsUmFuZ2VzIl0sInNvdXJjZVJvb3QiOiIifQ==