(()=>{console.log("VocabDict content script loaded");let e=null,t=null;document.addEventListener("selectionchange",()=>{clearTimeout(t),t=setTimeout(()=>{!function(){const t=window.getSelection(),n=t.toString().trim();if(e&&(e.remove(),e=null),n&&n.length<=50&&n.split(/\s+/).length<=3)try{const e=t.getRangeAt(0).getBoundingClientRect();e.width>0&&e.height>0&&function(e){console.log("Would create lookup button for:",e)}(n)}catch(e){console.error("VocabDict: Error handling selection",e)}}()},300)}),window.addEventListener("pagehide",()=>{e&&e.remove()})})();